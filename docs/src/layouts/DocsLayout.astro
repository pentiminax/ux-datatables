---
import Layout from './Layout.astro'
import { docsSidebarSections } from '../config/navigation'

interface Props {
  title: string
  description?: string
}

const { title, description } = Astro.props
const pathname = Astro.url.pathname
---

<Layout title={title} description={description}>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex flex-col gap-8 py-8 md:flex-row">
      <!-- Sidebar -->
      <aside class="w-full shrink-0 md:w-64">
        <nav class="sticky top-24 space-y-8">
          {
            docsSidebarSections.map((section) => (
              <div>
                <h3 class="mb-3 text-sm font-semibold tracking-wider text-slate-500 uppercase">
                  {section.label}
                </h3>
                <ul class="space-y-2">
                  {section.items.map((item) => (
                    <li>
                      <a
                        href={item.href}
                        class:list={[
                          'block border-l-2 pl-4 text-sm transition-colors',
                          pathname === item.href
                            ? 'border-blue-500 text-white'
                            : 'border-transparent text-slate-400 hover:border-blue-500 hover:text-white',
                        ]}
                      >
                        {item.label}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            ))
          }
        </nav>
      </aside>

      <!-- Content -->
      <article class="prose prose-invert prose-blue max-w-none flex-grow">
        <slot />
      </article>
    </div>
  </div>
</Layout>

<style is:global>
  @import 'tailwindcss';
  .prose h1 {
    @apply mb-8 text-4xl;
  }
  .prose h2 {
    @apply mt-12 mb-6 border-b border-slate-800 pb-2 text-2xl;
  }
  .prose h3 {
    @apply mt-8 mb-4 text-xl;
  }
  .prose p {
    @apply mb-4 leading-relaxed text-slate-400;
  }
  .prose code {
    @apply rounded bg-slate-800 px-1.5 py-0.5 font-mono text-sm text-blue-300;
  }
  .prose pre {
    @apply my-6 overflow-x-auto rounded-lg border border-slate-800 bg-slate-900 p-4;
  }
  .prose pre code {
    @apply bg-transparent p-0 text-slate-300;
  }
  .prose ul {
    @apply mb-4 list-inside list-disc space-y-2 text-slate-400;
  }
  .prose ol {
    @apply mb-4 list-inside list-decimal space-y-2 text-slate-400;
  }
  .prose strong {
    @apply font-semibold text-white;
  }
  .prose a {
    @apply text-blue-400 underline decoration-slate-700 underline-offset-4 transition-all hover:text-blue-300 hover:decoration-blue-400;
  }
</style>
